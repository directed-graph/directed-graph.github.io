<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Texts to Passphrase :: Travis Chen — an engineer of the software persuasion</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="tl;dr: generate password based on a collection of text files.
Available on GitHub.
There are many ways to generate a password. If we use a password manager, we can usually generate a random string with different characters, numbers, and symbols. Then, we simply copy and paste those passwords to login.
However, sometimes, we may wish to manually type out the password. For example, we may want to login on a machine that is not ours (and so we do not wish to set up our password manager on that machine)." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://everchanging.dev/projects/texts-to-passphrase/" />




<link rel="stylesheet" href="/assets/style.css">

  <link rel="stylesheet" href="/assets/blue.css">






<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/icons/top-hat.png">



<meta name="twitter:card" content="summary" />

<meta name="twitter:creator" content="" />


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Texts to Passphrase :: Travis Chen">
<meta property="og:description" content="generate password based on a collection of text files" />
<meta property="og:url" content="https://everchanging.dev/projects/texts-to-passphrase/" />
<meta property="og:site_name" content="Texts to Passphrase" />

  
    <meta property="og:image" content="/icons/top-hat.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2019-08-30 16:48:27 -0700 -0700" />










<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />



</head>
<body class="">


<div class="container headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      
<a href="/">
  <div class="logo menu__inner--desktop">
    everchanging.dev
  </div>
  <div class="logo menu__inner--mobile">
    <div class="fa fa-home"></div>
  </div>
</a>


  
  <div class="logo">
    <a href="https://github.com/directed-graph" title="Github" class="fa fa-github"></a>
  </div>
  
  <div class="logo">
    <a href="https://linkedin.com/in/travischen" title="LinkedIn" class="fa fa-linkedin"></a>
  </div>
  



    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/">home</a></li>
        
      
        
          <li><a href="/projects">projects</a></li>
        
      
        
          <li><a href="/posts">posts</a></li>
        
      
        
          <li><a href="/about">about</a></li>
        
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/">home</a></li>
      
    
      
        <li><a href="/projects">projects</a></li>
      
    
      
        <li><a href="/posts">posts</a></li>
      
    
      
        <li><a href="/about">about</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://everchanging.dev/projects/texts-to-passphrase/">Texts to Passphrase</a></h1>
  <div class="post-meta">
      
    <span class="post-date">
      2019-08-30
    </span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="/tags/projects/">projects</a>&nbsp;
    
    #<a href="/tags/infosec/">infosec</a>&nbsp;
    
  </span>
  

  

  <div class="post-content"><div>
        <p><em>tl;dr</em>: generate password based on a collection of text files.</p>
<p>Available on <a href="https://github.com/directed-graph/texts-to-passphrase">GitHub</a>.</p>
<p>There are many ways to generate a password. If we use a password manager, we can
usually generate a random string with different characters, numbers, and
symbols. Then, we simply copy and paste those passwords to login.</p>
<p>However, sometimes, we may wish to manually type out the password. For example,
we may want to login on a machine that is not ours (and so we do not wish to set
up our password manager on that machine). Or, we may wish to enter our password
on the phone, but do not wish to put the password manager on the phone itself.</p>
<p>In these situations, what we need is a password generator that generates
passwords that are easy to type. Some password managers provide this ability
(e.g. diceware passwords, or similar). Here, we implement a slightly different
system. We take a set of books, or any arbitrary text. Then, we randomly select
words from those texts (this is almost equivalent to generating a &ldquo;page number&rdquo;,
a &ldquo;line number&rdquo;, and a &ldquo;word number&rdquo;). The selected words are then our password.</p>
<h2 id="usage">Usage<a href="#usage" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>A quick way to make sure this repository works is to run the <code>test.bash</code>. The
general usage syntax of the program itself is as follows:</p>
<pre><code>./generate.bash [ text_file ... ]
</code></pre>
<p>By default, we will look for text files stored under <code>texts/</code> as the text files
to use as our &ldquo;books&rdquo;. You may set the environment variable <code>TEXTS</code> to change
the location. Text files passed as arguments to the script are also used. To
ignore the <code>TEXTS</code> variable in any case, set <code>INCLUDE_TEXTS_VARIABLE=no</code>.</p>
<p>By default, we will generate 64 words, and up to 10 words per line. Set
<code>WORD_COUNT</code> and <code>PER_LINE</code> to change these. You may set <code>VERBOSE</code> (or <code>INFO</code>)
and <code>WARNING</code> to <code>yes</code> to have related messages be written to <code>stderr</code>. Also,
you may <a href="#custom-random-number-generator">export</a> <code>get_random</code> to use a custom
random number generator.</p>
<h2 id="implementation">Implementation<a href="#implementation" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>We give each &ldquo;book&rdquo; an equal probability of being selected. Note that this is
different from giving each word an equal probability. This is intentional, as
the probability of each &ldquo;page&rdquo;, &ldquo;line&rdquo;, and &ldquo;word&rdquo; will vary significantly
depending on which &ldquo;books&rdquo; you choose. We want to take advantage of that fact.</p>
<p>The main inputs are the text files (or &ldquo;books&rdquo;) and the number of words to
generate. We will select a random &ldquo;book&rdquo;, and from that random &ldquo;book&rdquo;, we will
select a line number in that book (here the line number will account for both
the &ldquo;page number&rdquo; and the &ldquo;line number&rdquo; in the book anology). Then, we will
select a word number in that line to be our word for this book. This will
repeat until we have generated the number of words we want to generate.</p>
<p>When getting the line we want, we can apply some filtering. For example, we may
wish to ignore all non-alphanumeric characters. Or, we may want to avoid all
lines that have less than a certain amount of words.</p>
<h2 id="custom-random-number-generator">Custom Random Number Generator<a href="#custom-random-number-generator" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>You may use a custom random number generator to increase security. By default,
we will use the <code>bash</code> built-in <code>$RANDOM</code> as a basis to generate the number. If
you want to use a custom generator, export <code>get_random</code> as a function or a
program. The <code>get_random</code> must take two arguments:</p>
<ol>
<li>the <code>upper</code> bound of the randomly generated number</li>
<li>the <code>lower</code> bound of the randomly generated number</li>
</ol>
<p>Without exporting <code>get_random</code>, we will do the equivalent of the following,
based on <a href="https://stackoverflow.com/a/49216005">this</a> answer:</p>
<pre><code>get_random() {
    local upper=${1:-4294967295} # 2^32 - 1
    local lower=${2:-0}
    echo $(($RANDOM * ($upper - $lower + 1) / 32768 + $lower))
}
</code></pre>
<h2 id="dependencies">Dependencies<a href="#dependencies" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>The programs we need include the following:</p>
<ul>
<li><code>bash</code></li>
<li><code>dirname</code></li>
<li><code>mktemp</code></li>
<li><code>sed</code></li>
<li><code>shuf</code></li>
<li><code>tr</code></li>
<li><code>wc</code></li>
</ul>
<p>On Linux and WSL, these should all be installed by default. On MacOS, you need
to install <code>coreutils</code> to get <code>shuf</code>. It will be installed as <code>gshuf</code>, but
<code>generate.bash</code> will automatically find it.</p>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="/projects/dynamic-knockd/">
                <span class="button__icon">←</span>
                <span class="button__text">Dynamic Knockd</span>
            </a>
        </span>
        
        
    </div>
</div>


  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>© Travis Chen</span>
    
      </div>
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>





  
</div>

</body>
</html>
