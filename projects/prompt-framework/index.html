<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Prompt Framework :: Travis Chen — an engineer of the software persuasion</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="tl;dr: customize your command prompt in a modular manner
Available on GitHub.
Prompt Framework is a small framework that modularizes your command prompt, and allows you to customize it by arranging different modules together.
One use case is to allow simple reuse of different components in different environments. For example, there might be some items you wish to display on your prompt at work. However, these items may be proprietary and not available publicly." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://everchanging.dev/projects/prompt-framework/" />




<link rel="stylesheet" href="/assets/style.css">

  <link rel="stylesheet" href="/assets/blue.css">






<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/icons/top-hat.png">



<meta name="twitter:card" content="summary" />

<meta name="twitter:creator" content="" />


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Prompt Framework :: Travis Chen">
<meta property="og:description" content="customize your command prompt in a modular manner" />
<meta property="og:url" content="https://everchanging.dev/projects/prompt-framework/" />
<meta property="og:site_name" content="Prompt Framework" />

  
    <meta property="og:image" content="/icons/top-hat.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2020-04-12 14:20:48 -0700 -0700" />










<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />



</head>
<body class="">


<div class="container headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      
<a href="/">
  <div class="logo menu__inner--desktop">
    everchanging.dev
  </div>
  <div class="logo menu__inner--mobile">
    <div class="fa fa-home"></div>
  </div>
</a>


  
  <div class="logo">
    <a href="https://github.com/directed-graph" title="Github" class="fa fa-github"></a>
  </div>
  
  <div class="logo">
    <a href="https://linkedin.com/in/travischen" title="LinkedIn" class="fa fa-linkedin"></a>
  </div>
  



    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/">home</a></li>
        
      
        
          <li><a href="/projects">projects</a></li>
        
      
        
          <li><a href="/posts">posts</a></li>
        
      
        
          <li><a href="/about">about</a></li>
        
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/">home</a></li>
      
    
      
        <li><a href="/projects">projects</a></li>
      
    
      
        <li><a href="/posts">posts</a></li>
      
    
      
        <li><a href="/about">about</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://everchanging.dev/projects/prompt-framework/">Prompt Framework</a></h1>
  <div class="post-meta">
      
    <span class="post-date">
      2020-04-12
    </span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="/tags/projects/">projects</a>&nbsp;
    
    #<a href="/tags/utilities/">utilities</a>&nbsp;
    
  </span>
  

  

  <div class="post-content"><div>
        <p><em>tl;dr</em>: customize your command prompt in a modular manner</p>
<p>Available on <a href="https://github.com/directed-graph/prompt-framework">GitHub</a>.</p>
<p>Prompt Framework is a small framework that modularizes your command prompt, and
allows you to customize it by arranging different modules together.</p>
<p>One use case is to allow simple reuse of different components in different
environments. For example, there might be some items you wish to display on your
prompt at work. However, these items may be proprietary and not available
publicly. In this situation, a modular system will be useful.</p>
<p>The Prompt Framework has been tested only on Bash.</p>
<h2 id="concept">Concept<a href="#concept" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>The main building block for Prompt Framework is Bash functions. The basic idea
is to have several functions; each function will be a &ldquo;module&rdquo; in the
description provided above. To create your prompt, save the list of functions
into an environment variable. Then, set your <code>PROMPT_COMMAND</code> to a function we
provide, which will compose those functions together to create your prompt.</p>
<h2 id="usage">Usage<a href="#usage" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>The general usage is to do the following in your <code>bashrc</code>:</p>
<ol>
<li>source <code>prompt_framework.bash</code> and all the modules you want</li>
<li>set and export <code>PROMPT_FRAMEWORK_MODULES</code> to a list of the modules</li>
<li>set and export <code>PROMPT_COMMAND=prompt_framework</code></li>
</ol>
<p>An example:</p>
<pre><code>source prompt_framework.bash

for module in modules/*.bash; do
    source $module
done

# from standard git installation
source /etc/bash_completion.d/git-prompt

GIT_PS1_SHOWDIRTYSTATE=true
GIT_PS1_SHOWSTASHSTATE=true
GIT_PS1_SHOWUNTRACKEDFILES=true
GIT_PS1_SHOWCOLORHINTS=true

export PROMPT_FRAMEWORK_MODULES=(
    pf_host_name
    pf_elliptical_path
    pf_shell_level
    __git_ps1
    pf_exit_code
)

export PROMPT_COMMAND=prompt_framework
</code></pre>
<p>In this example, the prompt will come out as follows:</p>
<pre><code>...travis.chen/projects/prompt-framework [3] (master *%) $
</code></pre>
<h2 id="environment-variables">Environment Variables<a href="#environment-variables" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Prompt Framework sets the following environment variables for your modules:</p>
<ul>
<li><code>PF_EXIT_CODE</code>: the exit code of the previous command</li>
</ul>
<p>Parameters can be sent to each module through environment variables. The naming
convention for the environment variables should be the following:</p>
<pre><code>PF_&lt;module_name&gt;[__&lt;parameter&gt;]
</code></pre>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        
        <span class="button next">
            <a href="/projects/dynamic-knockd/">
                <span class="button__text">Dynamic Knockd</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>


  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>© Travis Chen</span>
    
      </div>
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>





  
</div>

</body>
</html>
